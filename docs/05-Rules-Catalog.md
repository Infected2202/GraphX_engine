**Каталог правил и их статус**

| Правило                                           | Статус            | Слой                       | Параметры/флаги                                                                  | Примечания                                                                     |
| ------------------------------------------------- | ----------------- | -------------------------- | -------------------------------------------------------------------------------- | ------------------------------------------------------------------------------ |
| Базовый цикл `DAY→NIGHT→OFF→OFF`                  | **Реализовано**   | generator                  | `rotation_epoch_policy=new_year_reset`                                           | Фазы от 1 января; детерминизм через `seed4`.                                   |
| Ротация офисов A/B на каждом рабочем выходе       | **Реализовано**   | generator                  | —                                                                                | Чётность `work_turn_before` (не прерывается между месяцами).                   |
| Перенос ночи на границе месяца (`N4`/`N8`)        | **Реализовано**   | generator                  | —                                                                                | Последний день: `N4*`; 1-е следующего: `N8*`.                                  |
| Ограничение часов в месяце (12→8)                 | **Реализовано**   | generator                  | `monthly_overtime_max`, `yearly_overtime_max`                                    | Сокращаем только `DAY 12ч` → `E8*` (выходные), затем `M8*`. Ночные не трогаем. |
| Отпуск = перекраска (VAC8/VAC0)                   | **Реализовано**   | postprocess                | —                                                                                | Будни → `VAC8`, выходные → `VAC0`. Паттерн не меняется.                        |
| Минимум 2 человека в дневную (A и B)              | **Запланировано** | новый слой                 | `coverage.require_day_a/b`                                                       | Реализовать без ломки базового цикла; при недокомплекте — «помощники».         |
| «Помощники» и их чередование                      | **Запланировано** | новый слой                 | порог/флаг                                                                       | Добавлять временно на день для покрытия; учёт справедливости.                  |
| Пары (overlap) и перемешивание                    | **Частично**      | pairing/balancer *(PR-3)*  | `pair_breaking.{enabled, overlap_threshold, window_days, max_ops, hours_budget}` | Нужна реальная смена `shift_key` при сдвиге и строгие критерии приёма.         |
| Учёт «соло»-дней/месяцев, анти-соло               | **Частично**      | coverage/balancer *(PR-3)* | приоритет по истории соло                                                        | Влияет на приоритизацию сдвигов.                                               |
| Стажёры (следуют наставнику)                      | **Запланировано** | пост-правило               | `trainees_count_towards_coverage`                                                | Может не входить в покрытие; дублировать офис/смены наставника.                |
| Производственный календарь/эталон                 | **Запланировано** | валидатор + генератор      | лимиты 10/120                                                                    | Сверка «не менее эталона», переносы праздников (не ломая паттерн).             |
| CP-SAT/оптимизация                                | **Опционально**   | улучшатель                 | —                                                                                | Поверх шаблона, малые инстансы; не заменяет базовый алгоритм.                  |
| Сдвиги только в начале месяца (оконный safe-mode) | **Частично**      | balancer *(PR-3)*          | `window_days`                                                                    | `N8*` не трогать; `N4*` — производное; нужны жёсткие условия приёма.           |
| Логирование/сценарии                              | **Реализовано**   | orchestrator/report        | —                                                                                | Bootstrap-хвост, carry-in/out, smoke-метрики, пары.                            |
