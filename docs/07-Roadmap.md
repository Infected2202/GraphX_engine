**Дорожная карта (приоритетно)**

## PR-3 (доделка) — Разрыв пар (safe-mode)

* **Сделать**: реальное переназначение `shift_key` при сдвиге; строгие условия приёма (coverage/solo/carry/инварианты); лог «до/после».
* **Критерий готовности**: в сценариях `S_7_bal_on` и `S_5_solo_bal_on` наблюдается снижение pair-score (≥15–25% в окне) без падения `coverage-ok days` и без роста суммарных «соло»-дней; переносы `N4/N8` сохранены.

## PR-4 — Компенсация часов при сдвигах (M8/E8)

* **Сделать**: в `shifts_ops` разрешить локальную замену `DAY 12ч → 8ч` для удержания лимита; приоритет выходных (`E8*`) > будней (`M8*`).
* **Критерий готовности**: при включённом баланcере месячные/годовые лимиты не нарушаются без отклонения принятых улучшений пар.

## PR-5 — Минимум 2 в дневную + «помощники»

* **Сделать**: слой покрытия, который при недокомплекте добирает вторую дневную позицию «помощником», с ротацией помощников и метрикой справедливости.
* **Критерий**: по всем сценариям (кроме преднамеренно экстремальных) `DA+DB≥2` для рабочих дней; «помощники» равномерно распределяются.

## PR-6 — Стажёры

* **Сделать**: стажёр «прилипает» к наставнику (копирует смену и офис).
* **Критерий**: стажёры не ломают покрытие и не меняют паттерн наставника; метрики часов стажёра корректны.

## PR-7 — Производственный календарь / эталон

* **Сделать**: загрузка эталона, валидация «не менее эталона», жёсткие лимиты 10/120 в валидаторе; возможные исключения в отчёт.
* **Критерий**: в отчётах помесячно видно соответствие эталону; нарушения подсвечены и объяснены.

## PR-8 — CP-SAT улучшатель (опция)

* **Сделать**: небольшой оптимизационный проход поверх базового расписания (микросдвиги, M8/E8), но **только** в рамках инвариантов.
* **Критерий**: на малых составах демонстрируется улучшение pair/solo/coverage при тех же жёстких ограничениях.

## PR-9 — (при необходимости) Лёгкий GUI

* **Сделать**: просмотр матрицы, подсветка нарушений, ручная правка, перегенерация.
